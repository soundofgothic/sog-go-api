name: learn-github-actions
run-name: ${{ github.actor }} is learning GitHub Actions
on: 
  push:
    branches:
      - 'main'
jobs:
  tagger:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0 # Required due to the way Git works, without it this action won't be able to find any or the correct tags
      - name: 'Get next tag'
        id: getnexttag
        run:
          echo NEXT_TAG=$(git tag --sort=taggerdate | tail -1 | awk -F. '{print $1"."$2"."($3+1)}') >> $GITHUB_ENV
      - name: 'Push tag'
        run: |
          git config --global user.name 'GitHub Actions'
          git config --global user.email 'github-actions@github.com'
          git tag $NEXT_TAG
          git push origin $NEXT_TAG


            